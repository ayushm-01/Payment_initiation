const fetchNextBatch = async () => {
  try {
    console.debug("Fetching next batch from", `/api${url}`, "params:", getUserIdParam());
    const res = await API.get(`/api${url}`, {
      params: getUserIdParam(),
    });

    console.debug("fetchNextBatch response:", res.data);
    console.debug("Response type:", typeof res.data);
    console.debug("Is array:", Array.isArray(res.data));

    // Handle the response based on your Postman output
    if (res.data && res.data.batchId) {
      // Single batch object (like your Postman response)
      setBatch(res.data);
      console.log("Set single batch:", res.data);
    } else if (Array.isArray(res.data)) {
      if (res.data.length > 0) {
        setBatch(res.data[0]);
        console.log("Set first batch from array:", res.data[0]);
      } else {
        setBatch(null);
        console.log("Empty array received");
      }
    } else {
      setBatch(null);
      console.log("No valid batch data received");
    }
  } catch (err) {
    console.error("Error fetching batch:", err);
    console.error("Error details:", err.response?.data);
    alert("Failed to fetch batch!");
  }
};
